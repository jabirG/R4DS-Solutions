{
  "hash": "653303b99dc3c4bb7199d90509e60696",
  "result": {
    "markdown": "---\ntitle: \"Communication\"\n---\n\n\n## Notes\n\nlabeling plots text\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0     ✔ purrr   1.0.1\n✔ tibble  3.1.8     ✔ dplyr   1.1.0\n✔ tidyr   1.3.0     ✔ stringr 1.5.0\n✔ readr   2.1.3     ✔ forcats 1.0.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlabel_info <- mpg |>\n  group_by(drv) |>\n  arrange(desc(displ)) |>\n  slice_head(n = 1) |>\n  mutate(\n    drive_type = case_when(\n      drv == \"f\" ~ \"front-wheel drive\",\n      drv == \"r\" ~ \"rear-wheel drive\",\n      drv == \"4\" ~ \"4-wheel drive\"\n    )\n  ) |>\n  select(displ, hwy, drv, drive_type)\n\nlabel_info\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 4\n# Groups:   drv [3]\n  displ   hwy drv   drive_type       \n  <dbl> <int> <chr> <chr>            \n1   6.5    17 4     4-wheel drive    \n2   5.3    25 f     front-wheel drive\n3   7      24 r     rear-wheel drive \n```\n:::\n\n```{.r .cell-code}\n#> # A tibble: 3 × 4\n#> # Groups:   drv [3]\n#>   displ   hwy drv   drive_type       \n#>   <dbl> <int> <chr> <chr>            \n#> 1   6.5    17 4     4-wheel drive    \n#> 2   5.3    25 f     front-wheel drive\n#> 3   7      24 r     rear-wheel drive\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(se = FALSE) +\n  geom_text(\n    data = label_info, \n    aes(x = displ, y = hwy, label = drive_type),\n    fontface = \"bold\", size = 5, hjust = \"right\", vjust = \"bottom\"\n  ) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n\nnudge and rectangle around label\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(se = FALSE) +\n  geom_label(\n    data = label_info, \n    aes(x = displ, y = hwy, label = drive_type),\n    fontface = \"bold\", size = 5, hjust = \"right\", alpha = 0.5, nudge_y = 2,\n  ) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n\ngeom_label_repel ggrepel package adjust labels for you\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(alpha = 0.3) +\n  geom_smooth(se = FALSE) +\n  geom_label_repel(\n    data = label_info, \n    aes(x = displ, y = hwy, label = drive_type),\n    fontface = \"bold\", size = 5, nudge_y = 2,\n  ) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#> `geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n\ngreat use of information\n\n\n::: {.cell}\n\n```{.r .cell-code}\npotential_outliers <- mpg |>\n  filter(hwy > 40 | (hwy > 20 & displ > 5))\n  \nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  geom_text_repel(data = potential_outliers, aes(label = model)) +\n  geom_point(data = potential_outliers, color = \"red\") +\n  geom_point(data = potential_outliers, color = \"red\", size = 3, shape = \"circle open\")\n```\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\ni think you have to create a data frame everytime\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlabel_info <- mpg |>\n  summarize(\n    displ = max(displ),\n    hwy = max(hwy),\n    label = \"Increasing engine size is \\nrelated to decreasing fuel economy.\"\n  )\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  geom_text(\n    data = label_info, aes(label = label), \n    vjust = \"top\", hjust = \"right\"\n  )\n```\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Questions\n\n## Solutions\n\nprerequisites\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggrepel)\nlibrary(patchwork)\n```\n:::\n\n\n## Exercises 12.2.1\n\n1.  Create one plot on the fuel economy data with customized `title`, `subtitle`, `caption`, `x`, `y`, and `color` labels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  geom_smooth(se = FALSE) +\n  labs( title = \"insert title here\",\n        subtitle = \"insert subtitle here\",\n        caption = \"insert source here\",\n    x = \"Engine displacement (L)\",\n    y = \"Highway fuel economy (mpg)\",\n    color = \"Car type\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n2.Recreate the following plot using the fuel economy data. Note that both the colors and shapes of points vary by type of drive train\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(mpg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 234\nColumns: 11\n$ manufacturer <chr> \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"…\n$ model        <chr> \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4 quattro\", \"…\n$ displ        <dbl> 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2.…\n$ year         <int> 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 200…\n$ cyl          <int> 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8, …\n$ trans        <chr> \"auto(l5)\", \"manual(m5)\", \"manual(m6)\", \"auto(av)\", \"auto…\n$ drv          <chr> \"f\", \"f\", \"f\", \"f\", \"f\", \"f\", \"f\", \"4\", \"4\", \"4\", \"4\", \"4…\n$ cty          <int> 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 1…\n$ hwy          <int> 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, 2…\n$ fl           <chr> \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p…\n$ class        <chr> \"compact\", \"compact\", \"compact\", \"compact\", \"compact\", \"c…\n```\n:::\n\n```{.r .cell-code}\nmpg %>% ggplot(aes(x = cty,y = hwy,color = drv,shape = drv)) +\n  geom_point() +\n  labs(x = \"City MPG\",\n        y = \"Highway MPG\",\n        shape = \"Type of drive train\",\n       color = \"Type of drive train\"\n       )\n```\n\n::: {.cell-output-display}\n![](chapter-12_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "chapter-12_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}